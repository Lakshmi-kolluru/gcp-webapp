<!-- Container starts -->
<div class="container">
    <div class="page-header">
        <div class="row">
            <div class="col-lg-6">
                <ol class="breadcrumb pull-left">
                    <li class="breadcrumb-item">
                        <a [routerLink]="'/mainPage'"><i class="fa fa-home"></i></a>
                    </li>
                    <li class="breadcrumb-item">Profile</li>
                    <li class="breadcrumb-item active">Settings</li>
                </ol>
            </div>
        </div>
    </div>
    <ngb-alert [type]="'info'" [dismissible]="false">
        This page for demo usage only. The features will actually not work
    </ngb-alert>

    <!-- Account settings div start -->
    <div [hidden]="accountsettingsdiv" class="row">
        <div class="col-sm-12 col-xl-12" *ngIf="profile && userSettings">
            <div class="card">
                <div class="card-header">
                    <h5 style="text-transform: lowercase">
                        {{ profile.email_id }}
                    </h5>
                    <span>Plan : {{ userSettings.current_plan.plan_name }}</span>
                    <!--    <span>Memory used : {{ userProfile.memory }}</span> -->
                </div>
                <div class="card-body vertical-tab">
                    <ngb-tabset>
                        <ngb-tab>
                            <ng-template ngbTabTitle class="nav-item col-sm-4">
                                <div class="list-group" id="list-tab" role="tablist">
                                    <label style="color: #333">Membership and Billing</label>
                                </div>
                            </ng-template>
                            <ng-template ngbTabContent class="tab-content col-sm-8">
                                <div class="row">
                                    <div class="col-sm-12">
                                        <div class="tab-pane fade show active" id="list-home" role="tabpanel" aria-labelledby="list-home-list">
                                            <div class="card shadow-sm">
                                                <div class="card-body">
                                                    <!--  <div class="row" *ngIf="!openToggle">
                                                        <div class="col-sm-6">
                                                            <b>Billing Info ( Default )</b>
                                                            <p>{{ userProfile.billing }}</p>
                                                        </div>
                                                        <div class="col-sm-2"></div>
                                                        <div class="col-sm-4 alignR">
                                                            <a class="btn-link">Update Payment Method</a>
                                                        </div>
                                                    </div> -->
                                                    <br />
                                                    <div>
                                                        <b> Last Payment Date</b>
                                                        <p>
                                                            {{ latestPay.renewal_date | date: "dd MMM yyyy" }}
                                                        </p>
                                                    </div>
                                                    <br />
                                                    <div>
                                                        <b>Next Billing Date</b>
                                                        <p>
                                                            {{ latestPay.expiray_date | date: "dd MMM yyyy" }}
                                                        </p>
                                                    </div>
                                                    <br />
                                                    <div class="row">
                                                        <div class="col-sm-4">
                                                            <b> Auto Renewal</b>
                                                            <br />
                                                            <label class="switch" style="margin-top: 5px; margin-left: 0">
                                <input type="checkbox" id="sidebar-toggle" />
                                <span
                                  class="switch-state"
                                  (click)="switchToggle()"
                                  style="margin-left: 0"
                                ></span>
                              </label>
                                                        </div>

                                                        <div class="col-sm-4"></div>
                                                        <div class="col-sm-4 alignR">
                                                            <a class="btn-link" class="btn-link" (click)="showBillingHistory()">Billing History</a
                              >
                            </div>
                          </div>
                        </div>
                        <div class="card-footer text-right">
                          <button
                            type="button"
                            style="margin-right: 2%"
                            class="btn btn-primary"
                            (click)="pay('basic')"
                            *ngIf="!openToggle"
                          >
                            Renew Payment
                          </button>
                          <button
                            type="button"
                            class="btn btn-primary"
                            (click)="cancelMembership()"
                          >
                            Cancel Membership
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </ng-template>
            </ngb-tab>
            <ngb-tab>
              <ng-template ngbTabTitle class="nav-item col-sm-4">
                <div class="list-group" id="list-tab" role="tablist">
                  <label style="color: #333">Plan Details</label>
                </div>
              </ng-template>
              <ng-template ngbTabContent class="tab-content col-sm-8">
                <div class="row">
                  <div class="col-sm-12">
                    <div
                      class="tab-pane fade show active"
                      id="list-home"
                      role="tabpanel"
                      aria-labelledby="list-home-list"
                    >
                      <div class="card shadow-sm">
                        <div class="card-body">
                          <b>Current Plan</b>
                          <p>{{ userSettings.current_plan.plan_name }}</p>
                          <br />
                          <div class="pricing-wrapper-card">
                            <div class="row">
                              <!--Basic Details-->
                              <div
                                class="pricing-card popular col-xl-4 col-lg-4 col-md-12 col-sm-12"
                              >
                                <div class="card-ribbon">
                                  <span>Existing Plan</span>
                                </div>
                                <div class="card-title">
                                  <h3>Basic</h3>
                                  <h5>Sample demo plan for initial usage</h5>
                                </div>
                                <div class="card-price">
                                  <h1>
                                    <sup>$</sup>
                                    <span class="counter">249.99</span>
                                    <small>year</small>
                                  </h1>
                                </div>
                                <div class="card-description">
                                  <ul>
                                    <li>Unlimited documents/ sections</li>
                                    <li>Unlimited Storage</li>
                                    <li>External/Internal Collaboration</li>
                                  </ul>
                                </div>
                                <div class="card-action">
                                  <button
                                    type="button"
                                    (click)="onSubmit('basic')"
                                  >
                                    Get Basic
                                  </button>
                                </div>
                              </div>
                              <!--Pro Details-->
                              <div
                                class="pricing-card col-xl-4 col-lg-4 col-md-12 col-sm-12"
                              >
                                <!-- <div class="card-ribbon">
                      <span>most popular</span>
                    </div> -->
                                <div class="card-title">
                                  <h3>Pro</h3>
                                  <h5>Upcoming Plan</h5>
                                </div>
                                <div class="card-price">
                                  <h1>
                                    <sup>$</sup>
                                    <span class="counter">0</span>
                                    <small>year</small>
                                  </h1>
                                </div>
                                <div class="card-description">
                                  <ul>
                                    <li>Unlimited documents/ sections</li>
                                    <li>Unlimited Storage</li>
                                    <li>External/Internal Collaboration</li>
                                  </ul>
                                </div>
                                <div class="card-action">
                                  <button
                                    type="button"
                                    class="disabled"
                                    [disabled]="true"
                                    (click)="onSubmit('pro')"
                                  >
                                    Get Pro
                                  </button>
                                </div>
                              </div>

                              <!--Premium Details-->
                              <div
                                class="pricing-card col-xl-4 col-lg-4 col-md-12 col-sm-12"
                              >
                                <div class="card-title">
                                  <h3>Premium</h3>
                                  <h5>Upcoming Plan</h5>
                                </div>
                                <div class="card-price">
                                  <h1>
                                    <sup>$</sup>
                                    <span class="counter">0</span>
                                    <small>year</small>
                                  </h1>
                                </div>
                                <div class="card-description">
                                  <ul>
                                    <li>Unlimited documents/ sections</li>
                                    <li>Unlimited Storage</li>
                                    <li>External/Internal Collaboration</li>
                                  </ul>
                                </div>
                                <div class="card-action">
                                  <button
                                    type="button"
                                    class="disabled"
                                    [disabled]="true"
                                    (click)="onSubmit('premium')"
                                  >
                                    Get Premium
                                  </button>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </ng-template>
            </ngb-tab>
            <ngb-tab>
              <ng-template ngbTabTitle class="nav-item col-sm-4">
                <div class="list-group" id="list-tab" role="tablist">
                  <label style="color: #333">Storage Settings</label>
                </div>
              </ng-template>
              <ng-template ngbTabContent class="tab-content col-sm-8">
                <div class="row">
                  <div class="col-sm-12">
                    <div
                      class="tab-pane fade show active"
                      id="list-home"
                      role="tabpanel"
                      aria-labelledby="list-home-list"
                    >
                      <div class="card shadow-sm">
                        <div class="card-body">
                          <div class="row">
                            <div class="col-sm-4">
                              <div class="form-group">
                                <label for="exampleFormControlSelect9"
                                  ><b>Primary DB Location</b></label
                                >
                                <select
                                  class="form-control digits"
                                  id="exampleFormControlSelect9"
                                  [(ngModel)]="userSettings.primary_db_location"
                                >
                                  <option
                                    *ngFor="let location of locations"
                                    [ngValue]="location.place"
                                  >
                                    {{ location.place }}
                                  </option>
                                </select>
                              </div>
                            </div>
                          </div>
                          <br />
                          <div class="row">
                            <div class="col-sm-4">
                              <div class="form-group">
                                <label for="exampleFormControlSelect9"
                                  ><b>Secondary DB Location</b></label
                                >
                                <select
                                  class="form-control digits"
                                  id="exampleFormControlSelect9"
                                  [(ngModel)]="
                                    userSettings.secondary_db_location
                                  "
                                >
                                  <option
                                    *ngFor="let location of locations"
                                    [ngValue]="location.place"
                                  >
                                    {{ location.place }}
                                  </option>
                                </select>
                              </div>
                            </div>
                          </div>
                          <br />
                          <!-- <b> Storage Space</b>
                          <p>30 GB</p>
                          <br />
                          <b> Data Usage</b>
                          <div
                            class="progress"
                            style="height: 23px; margin-top: 10px"
                          >
                            <div
                              class="progress-bar db-storage"
                              role="progressbar"
                              aria-valuenow="10"
                              aria-valuemin="0"
                              aria-valuemax="50"
                            >
                              10 of 50 GB
                            </div>
                          </div> -->
                        </div>
                        <div class="card-footer text-right">
                          <button
                            type="button"
                            class="btn btn-primary"
                            (click)="changeLocation()"
                          >
                            Change Location
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </ng-template>
            </ngb-tab>
          </ngb-tabset>
        </div>
      </div>
    </div>
  </div>
  <!-- Account settings div ends here -->

  <!-- Change plan div starts here -->

  <!-- Container starts -->
  <!-- <div class="container" [hidden]="plandetailsdiv">
  <div class="row">
    <div class="col-sm-12">
      <div class="card">
        <div class="card-header">
          <div class="row justify-content-between">
            <h4 class="card-title mb-0">Plan Details</h4>
           (click)="goback()" class="pull-right"><i class="fa fa-angle-left"></i>&nbsp;&nbsp; Go Back</a>
                                                        </div>
                                                    </div>
                                                    <div class="card-body m-auto">
                                                        <div class="pricing-wrapper-card">
                                                            <div class="row">
                                                                <div class="pricing-card col-xl-4">
                                                                    <div class="card-title">
                                                                        <h3>Basic</h3>
                                                                        <h5>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</h5>
                                                                    </div>
                                                                    <div class="card-price">
                                                                        <h1>
                                                                            <sup>$</sup>
                                                                            <span class="counter">12</span>
                                                                            <small>month</small>
                                                                        </h1>
                                                                    </div>
                                                                    <div class="card-description">
                                                                        <ul>
                                                                            <li>Lorem ipsum dolor sit amet</li>
                                                                            <li>Pellentesque hendrerit</li>
                                                                            <li>Aliquam at orci aliquam</li>
                                                                            <li>Praesent non sapien laoreet</li>
                                                                        </ul>
                                                                    </div>
                                                                    <div class="card-action">
                                                                        <button type="button">Get Basic</button>
                                                                    </div>
                                                                </div>
                                                                <div class="pricing-card popular col-xl-4">
                                                                    <div class="card-ribbon">
                                                                        <span>most popular</span>
                                                                    </div>
                                                                    <div class="card-title">
                                                                        <h3>Pro</h3>
                                                                        <h5>Maecenas ut justo molestie, pharetra arcu ac, mollis est.</h5>
                                                                    </div>
                                                                    <div class="card-price">
                                                                        <h1>
                                                                            <sup>$</sup>
                                                                            <span class="counter">15</span>
                                                                            <small>month</small>
                                                                        </h1>
                                                                    </div>
                                                                    <div class="card-description">
                                                                        <ul>
                                                                            <li>Lorem ipsum dolor sit amet</li>
                                                                            <li>Pellentesque hendrerit</li>
                                                                            <li>Aliquam at orci aliquam</li>
                                                                            <li>Praesent non sapien laoreet</li>
                                                                        </ul>
                                                                    </div>
                                                                    <div class="card-action">
                                                                        <button type="button">Get Pro</button>
                                                                    </div>
                                                                </div>
                                                                <div class="pricing-card col-xl-4">
                                                                    <div class="card-title">
                                                                        <h3>Premium</h3>
                                                                        <h5>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</h5>
                                                                    </div>
                                                                    <div class="card-price">
                                                                        <h1>
                                                                            <sup>$</sup>
                                                                            <span class="counter">20</span>
                                                                            <small>month</small>
                                                                        </h1>
                                                                    </div>
                                                                    <div class="card-description">
                                                                        <ul>
                                                                            <li>Lorem ipsum dolor sit amet</li>
                                                                            <li>Pellentesque hendrerit</li>
                                                                            <li>Aliquam at orci aliquam</li>
                                                                            <li>Praesent non sapien laoreet</li>
                                                                        </ul>
                                                                    </div>
                                                                    <div class="card-action">
                                                                        <button type="button">Get Premium</button>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div> -->
                                    <!-- Container Ends -->
                                    <!-- Change Plan div ends here -->

                                    <!-- Change Location Div Starts Here -->

                                    <!-- <div class="container" [hidden]="changedbdiv">
  <div class="row">
    <div class="col-sm-12">
      <div class="card">
        <div class="card-header">
          <div class="row justify-content-between">
            <h4 class="card-title mb-0">Change DB Storage Location</h4>
           <a (click)="goback()" class="pull-right"><i class="fa fa-angle-left"></i> &nbsp;&nbsp; Go Back</a>
            </div>
        </div>

        <div class="card-body">
          <div class="row">
            <div class="col-sm-4">
              <b>Current DB Location</b>
              <p>NY, USA</p>
            </div>
          </div>
          <br>
          <div class="row">
            <div class="col-sm-4">
              <div class="form-group">
                <label for="exampleFormControlSelect9"><b>Select Location</b></label>
                <select class="form-control digits" id="exampleFormControlSelect9" disabled="true">
                  <option>Arizona ,USA</option>
                  <option>NY , USA</option>
                  <option>Sydney , Australia</option>
                  <option>London , UK</option>
                  <option>Berlin , Germany</option>
                </select>
              </div>
            </div>
          </div>

        </div>
        <div class="card-footer text-right">
          <button type="button" class="btn btn-primary" (click)="updateLocation()">
            Change
          </button>
        </div>
      </div>

    </div>
  </div>
</div> -->

                                    <!-- Change Location Div Ends here -->

                                    <!-- Billing History Div starts here -->

                                    <div [hidden]="showbillingH">
                                        <div class="row">
                                            <div class="col-sm-12">
                                                <div class="card">
                                                    <div class="card-header">
                                                        <div class="row justify-content-between">
                                                            <h4 class="card-title mb-0">Billing History</h4>
                                                            <a (click)="goback()" class="btn-link pull-right"><i class="fa fa-angle-left"></i> &nbsp;&nbsp; Go Back</a
              >
            </div>
          </div>

          <div class="card-body custom-datatable" *ngIf="userSettings">
            <div class="row">
              <div class="col-sm-4">
                <b>Current Plan</b>
                <p>
                  {{ userSettings.current_plan.plan_name }} for $49.99 /year
                </p>
              </div>
            </div>
            <br />
            <div class="row">
              <div class="col-sm-4">
                <b>Next Billing Date</b>
                <p>01 Jul 2020</p>
              </div>
            </div>
            <br />
            <table class="table table-striped table-bordered">
              <thead>
                <tr>
                  <th>Date</th>
                  <th>Plan</th>
                  <th>Service Period</th>
                  <th>Plan Price</th>
                  <th>Paid</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let item of userSettings.billing_info">
                  <td>{{ item.renewal_date | date: "dd MMM yyyy" }}</td>
                  <td>{{ item.applied_plan.plan_name }}</td>
                  <td>
                    {{ item.renewal_date | date: "dd MMM yyyy" }}
                    <span> &nbsp;&nbsp;to&nbsp;&nbsp; </span>
                    {{ item.expiray_date | date: "dd MMM yyyy" }}
                  </td>
                  <td>{{ item.applied_plan.price }}</td>
                  <td>
                    $ {{ item.price_paid }}
                    <span *ngIf="item.applied_plan.price !== item.price_paid">
                      &nbsp;&nbsp;(Coupon Applied)</span
                    >
                  </td>
                </tr>
              </tbody>
            </table>
            <br />
            <br />
            <p class="floated meta">
              NOTE: We only show up to 1 year of billing history
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Billing History Div ends here -->
</div>
<!-- Container Ends -->